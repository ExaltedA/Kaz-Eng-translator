# Kazakh-to-English Translator Service

This project provides a FastAPI-based RESTful service for translating text from Kazakh to English using the Hugging Face `amandyk/mt5-kazakh-english-translation` model. The service handles the model loading, caching, and provides a scalable architecture for extending the functionality to other translation models.

## Features
- **Kazakh to English Translation** using a pre-trained MT5 model.
- **FastAPI** RESTful API implementation.
- **Model Caching**: After the model is downloaded, it is cached locally for faster subsequent requests.
- **Dockerized**: Fully containerized for easy deployment on any platform.

---

## Documentation and Instructions

### a. How to Run the Application

1. **Clone the Repository**:
    ```bash
    git clone https://github.com/ExaltedA/Kaz-Eng-translator.git
    cd Kaz-Eng-translator
    ```

2. **Set Up Environment Variables**:
   - Create a `.env` file in the root of your project and specify the required environment variables:
     ```
     MODEL_NAME=amandyk/mt5-kazakh-english-translation
     LOGGING_LEVEL=INFO
     API_PORT=8000
     ```

3. **Install Dependencies**:
    If you are running it locally, create a virtual environment and install the required dependencies:
    ```bash
    python -m venv venv
    source venv/bin/activate  # On Windows use `venv\Scripts\activate`
    pip install -r requirements.txt
    ```

4. **Run the Application Locally**:
    Run the application using Uvicorn (FastAPI server):
    ```bash
    python main.py
    ```

5. **Run with Docker**:
    Alternatively, you can run the application in a Docker container:

    a. **Build the Docker Image**:
    ```bash
    docker build -t translator-service .
    ```

    b. **Run the Docker Container**:
    ```bash
    docker run -p 8000:8000 translator-service
    ```

6. **Access the API**:
   The API will be accessible at `http://localhost:8000/v1/translate/`. You can test it by sending a POST request with a JSON payload containing the text you want to translate.

## Available Endpoints
### 1. **FastAPI Auto-Generated Documentation**

FastAPI automatically generates interactive API documentation that you can access via your browser. The documentation is useful for exploring the available API endpoints and testing them directly through the browser.

#### a. **Swagger UI Documentation**

- **URL**: `/docs`
- **Method**: `GET`
- **Description**: Provides interactive Swagger UI documentation of the API.

#### Example Request:
Open your browser and navigate to:

```bash
http://localhost:8000/docs
```

This will open an interactive UI where you can explore and test the API endpoints, including sending requests directly from the interface.

---

#### b. **Redoc Documentation**

- **URL**: `/redoc`
- **Method**: `GET`
- **Description**: Provides an alternative, ReDoc-styled documentation of the API.

#### Example Request:
Open your browser and navigate to:

```bash
http://localhost:8000/redoc
```

---

### 2. **Health Check Endpoint**

This endpoint is used to check if the API is up and running.

- **URL**: `/v1/healthcheck/`
- **Method**: `GET`
- **Description**: Returns the status of the service.

#### Example Request:
```bash
curl -X GET "http://localhost:8000/v1/healthcheck/"
```

#### Example Response:
```json
{
    "status": "ok"
}
```

---

### 3. **Translation Endpoint**

This endpoint is used to translate text from Kazakh to English using the pre-trained Hugging Face MT5 model.

- **URL**: `/v1/translate/`
- **Method**: `POST`
- **Description**: Translates text from Kazakh to English.

#### Request Body:
- **text**: The text to translate (in Kazakh).

#### Example Request:
```bash
curl -X POST "http://localhost:8000/v1/translate/" \
    -H "Content-Type: application/json" \
    -d '{"text": "Қазақстан Республикасының астанасы қай қала?"}'
```

#### Example Response:
```json
{
    "translated_text": "What is the capital of the Republic of Kazakhstan?"
}
```

---

### Endpoint Summary:

| Endpoint            | Method | Description                                            |
|---------------------|--------|--------------------------------------------------------|
| `/docs`             | `GET`  | Swagger UI for exploring and testing the API           |
| `/redoc`            | `GET`  | ReDoc alternative API documentation                    |
| `/v1/healthcheck/`  | `GET`  | Checks if the service is running                       |
| `/v1/translate/`    | `POST` | Translates Kazakh text to English                      |

---

### Additional Notes:
- The `/docs` and `/redoc` endpoints are generated by FastAPI and provide interactive ways to explore the API.
- Both documentations are built-in and require no additional setup once the FastAPI app is running.
- The translation response times may vary depending on whether the model is already cached locally or being loaded for the first time.
---

### b. Technologies and Approaches

- **FastAPI**: A modern, high-performance web framework for building APIs with Python 3.7+.
- **Hugging Face Transformers**: Utilized for the Kazakh to English translation model (`amandyk/mt5-kazakh-english-translation`).
- **Pydantic**: Used for configuration management and data validation.
- **Model Caching**: The model is downloaded and cached locally after the first request, optimizing for faster responses on subsequent translations.
- **Docker**: Containerized the application for platform-independent deployment, making it easy to scale.

---

### c. Opportunities for Further Optimization and Scaling

1. **Asynchronous Model Loading**:
   - You can load the model asynchronously during startup to reduce the blocking time on startup, improving availability.

2. **Horizontal Scaling**:
   - The service can be horizontally scaled using containers, such as running multiple instances behind a load balancer to handle more traffic.

3. **Model Serving Optimization**:
   - For production environments, consider using dedicated model serving frameworks such as **TorchServe** or **Ray Serve** to efficiently distribute model inference across GPUs or clusters.

4. **Caching Translations**:
   - Implement **in-memory caching** (e.g., with Redis) to store recent translation results and minimize recomputation for frequently requested texts.

5. **Support for Multiple Language Pairs**:
   - The service can easily be extended to support more language pairs by adding new models or allowing dynamic model selection via request parameters.

---

### Project Structure

```bash
llm-integrator/
│
├── app/
│   ├── api/
│   │   └── v1/
│   │       ├── endpoints/
│   │       │   └── translation.py    # Translation endpoint
                └── health_check.py   # Health check endpoint
│   ├── core/
│   │   └── config.py  # Application settings and configuration
│   ├── local_models/  # Cached models
│   ├── services/
│   │   └── translator.py  # Model loading and translation logic
│   │   └── interfaces/translator_interface.py  # Interface for translation service
├── tests/
│   └── test_translation.py  # Test cases for API endpoints
├── .env  # Environment variables
├── main.py  # FastAPI entry point
├── Dockerfile  # Docker configuration
├── dependencies.py  # dependency injection to create reusable instances
└── requirements.txt  # Python dependencies
```